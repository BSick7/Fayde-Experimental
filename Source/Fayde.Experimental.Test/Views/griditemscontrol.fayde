<Page xmlns="http://schemas.wsick.com/fayde"
      xmlns:x="http://schemas.wsick.com/fayde/x"
      xmlns:exp="lib:Fayde.Experimental"
      xmlns:vms="ViewModels"
      Title="Home">
    <Page.Resources>
        <Style x:Key="GridCellStyle" TargetType="exp:GridCell">
            <Setter Property="FontSize" Value="11" />
            <Setter Property="FontFamily" Value="'Helvetica Nueue', Helvetica, Arial, sans-serif" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
        </Style>
    </Page.Resources>
    <Grid x:Name="LayoutRoot">
        <Grid.DataContext>
            <vms:MainViewModel />
        </Grid.DataContext>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <exp:GridHeadersControl ItemsControl="{Binding ElementName=ItemsControl}">
            <exp:GridHeader Header="" />
            <exp:GridHeader Header="First Name" />
            <exp:GridHeader Header="Last Name" />
        </exp:GridHeadersControl>
        <exp:GridItemsControl x:Name="ItemsControl" ItemsSource="{Binding Items}" FontSize="30" Grid.Row="1">
            <exp:GridItemsControl.Adorners>
                <exp:HoveredRowAdorner Background="#F1F1F1" />
                <exp:SelectedRowAdorner Background="#B2E0F4" />
                <!--
                <exp:HighlightedRowAdorner IsVisible="{Binding ActionTaken}" Background="#666666" />
                <exp:HighlightedRowAdorner IsVisible="{Binding Urgent}" Background="#8e2828" />
                -->
            </exp:GridItemsControl.Adorners>
            <exp:GridTemplateColumn>
                <exp:GridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Content="Delete" Click="{EventBinding Command={Binding DataContext.RemoveItem, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type exp:GridItemsControl}}}, CommandParameter={Binding}}" />
                    </DataTemplate>
                </exp:GridTemplateColumn.CellTemplate>
            </exp:GridTemplateColumn>
            <exp:GridTemplateColumn>
                <exp:GridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Content="Edit" MouseLeftButtonDown="{EventBinding Command={Binding Path=EditCommand, RelativeSource={RelativeSource ItemsControlParent}}, CommandParameter={Binding}}" />
                    </DataTemplate>
                </exp:GridTemplateColumn.CellTemplate>
            </exp:GridTemplateColumn>
            <exp:GridTextColumn Binding="{Binding FirstName}" CellStyle="{StaticResource GridCellStyle}" />
            <exp:GridTextColumn Binding="{Binding LastName}" />
            <exp:GridTemplateColumn>
                <exp:GridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Age}" />
                    </DataTemplate>
                </exp:GridTemplateColumn.CellTemplate>
                <exp:GridTemplateColumn.EditTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Age, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                    </DataTemplate>
                </exp:GridTemplateColumn.EditTemplate>
            </exp:GridTemplateColumn>
        </exp:GridItemsControl>
    </Grid>
</Page>